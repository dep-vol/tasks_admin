(this.webpackJsonptasks_admin=this.webpackJsonptasks_admin||[]).push([[0],{11:function(t,e,a){t.exports={container:"Input_container__Ynsw3",textInput:"Input_textInput__waVzB",checkInput:"Input_checkInput__IsJv4",teacherLabel:"Input_teacherLabel__1ARyl",edited:"Input_edited__1GpSP"}},20:function(t,e,a){t.exports={container:"EditTaskForm_container__xwVaL",taskContainer:"EditTaskForm_taskContainer__XVMBb",submitBtn:"EditTaskForm_submitBtn__Y0Ssf"}},29:function(t,e,a){t.exports=a(41)},34:function(t,e,a){},35:function(t,e,a){},41:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),c=a(27),i=a.n(c),r=a(16),o=(a(34),a(2)),d=(a(35),a(1)),u=a(7),l=a(12),b=a(13),h=a(15),m=a(14),p=a(9),O=a(24),f=a(11),j=a.n(f),k=function(t){var e=t.label,a=t.type,c=t.name,i=t.inputId,r=t.changeHandle,o=t.isCleared,u=t.defaultValue,l=t.editMode,b=t.isUndo,h=Object(n.useState)(Object(p.a)({},c,u)),m=Object(O.a)(h,2),f=m[0],k=m[1],v=Object(n.useState)(""),w=Object(O.a)(v,2),E=w[0],S=w[1];Object(n.useEffect)((function(){l&&(k((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(p.a)({},c,u))})),b&&S("")),o&&k("isChecked"===c?Object(p.a)({},c,!1):Object(p.a)({},c,""))}),[o,c,u,l,b]);var g=Object(n.useCallback)((function(t){var e=t.target,a="isChecked"===e.name?e.checked:e.value;k((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(p.a)({},e.name,a))})),l&&!b&&S("edited"),r&&r(a,c,i)}),[r,i,c,l,b]),_="checkbox"===a?{className:"".concat(j.a.checkInput," ").concat(j.a[E]),type:a,name:c,checked:!!f[c]}:{className:"".concat(j.a.textInput," ").concat(j.a[E]),type:a,name:c,value:f[c].toString()};return s.a.createElement("div",{className:j.a.container},s.a.createElement("label",null,s.a.createElement("p",{className:"checkbox"===a?j.a.teacherLabel:""},e," :"),s.a.createElement("input",Object.assign({},_,{onChange:g}))))},v=a(8),w=a.n(v),E=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).title=n.props.editMode?"\u0424\u043e\u0440\u043c\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438":"\u0424\u043e\u0440\u043c\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438",n.addAnswer=function(){n.setState((function(t){return Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),{},{answers:[].concat(Object(u.a)(t.data.answers),[{text:""}])})})}))},n.delAnswer=function(){n.setState((function(t){return Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),{},{answers:t.data.answers.slice(0,t.data.answers.length-1)})})}))},n.changeHandle=function(t,e,a){switch(e){case"description":if("string"!==typeof t)throw new Error("Error with value type");n.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{description:t})})}));break;case"answer":"string"===typeof t&&n.setState((function(e){if(void 0!==a)return e.data.answers[a]?Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{answers:e.data.answers.map((function(e,n){return n===a?Object(d.a)(Object(d.a)({},e),{},{text:t}):e}))})}):Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{answers:[].concat(Object(u.a)(e.data.answers),[{text:t}])})});throw new Error("Input id is undefined")}));break;case"isChecked":if(void 0===a)throw new Error("Input id is undefined");n.setState((function(e){var n=new Set([].concat(Object(u.a)(e.data.teachers),[a]));return t||n.delete(a),Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{teachers:Object(u.a)(Array.from(n).sort())})})}))}},n.checkSubmit=function(){return""!==n.state.data.description&&n.state.data.answers.length>0&&n.state.data.answers.every((function(t){return""!==t.text}))&&n.state.data.teachers.length>0},n.udoChanges=function(){n.setState((function(t){return Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)({},n.props.data),isUndo:!0})}))},n.changeMainAnswer=function(t,e,a){t.preventDefault();var s=n.state.data.answers.map((function(t){if(e!==t)return t;switch(a){case"add":return Object(d.a)(Object(d.a)({},t),{},{main:!0});case"del":return{text:t.text};default:return t}}));n.setState((function(t){return Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),{},{answers:s})})}))},n.checkMainChoosed=function(){return n.state.data.answers.some((function(t){return t.main||""===t.text}))},n.state={data:{description:"",answers:[],teachers:[]},isUndo:!1},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),t.props.data)})}))}},{key:"componentDidUpdate",value:function(t){var e=this;t.isSaved!==this.props.isSaved&&this.setState((function(t){return Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),e.props.data)})})),this.state.isUndo&&this.setState((function(t){return Object(d.a)(Object(d.a)({},t),{},{isUndo:!1})}))}},{key:"render",value:function(){var t=this;return s.a.createElement("div",null,s.a.createElement("h2",null,this.title),s.a.createElement("form",{className:"form",onSubmit:function(e){return t.props.handleSubmit(e,t.state.data)}},s.a.createElement(k,{label:"\u0423\u0441\u043b\u043e\u0432\u0438\u0435",type:"text",name:"description",changeHandle:this.changeHandle,isCleared:this.props.isSaved,defaultValue:this.state.data.description,editMode:this.props.editMode,isUndo:this.state.isUndo}),s.a.createElement("div",{className:w.a.answers},s.a.createElement("p",null,"\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u043e\u0442\u0432\u0435\u0442\u0430:"),s.a.createElement("div",null,s.a.createElement("button",{className:w.a.answersBtn,type:"button",onClick:this.addAnswer},"+"),s.a.createElement("button",{className:"".concat(w.a.answersBtn," ").concat(w.a.deleteBtn),type:"button",onClick:this.delAnswer,disabled:0===this.state.data.answers.length},"-"))),this.state.data.answers.map((function(e,a){return s.a.createElement("div",{key:a+"main"},s.a.createElement("div",null,s.a.createElement("button",{className:w.a.doMainBtn,onClick:function(a){return t.changeMainAnswer(a,e,"add")},disabled:t.checkMainChoosed()},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u043c"),s.a.createElement("button",{className:w.a.undoMainBtn,onClick:function(a){return t.changeMainAnswer(a,e,"del")}},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")),s.a.createElement(k,{label:"\u041e\u0442\u0432\u0435\u0442 \u2116 ".concat(a+1,"   ").concat(e.main?"- \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439":" "),type:"text",name:"answer",inputId:a,changeHandle:t.changeHandle,isCleared:t.props.isSaved,defaultValue:e&&e.text,editMode:t.props.editMode,isUndo:t.state.isUndo}))})),s.a.createElement("div",null,this.props.teachers.map((function(e,a){return s.a.createElement(k,{label:e,key:a+"Teacher id",type:"checkbox",name:"isChecked",inputId:a,changeHandle:t.changeHandle,isCleared:t.props.isSaved,defaultValue:t.state.data.teachers.includes(a),editMode:t.props.editMode,isUndo:t.state.isUndo})}))),s.a.createElement("button",{className:w.a.submitBtn,disabled:!this.checkSubmit()},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),!this.props.editMode&&s.a.createElement(r.b,{to:"/edit"},s.a.createElement("button",{className:w.a.goBtn},"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438")),this.props.editMode&&s.a.createElement("button",{className:w.a.goBtn,onClick:this.udoChanges},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f")))}}]),a}(n.Component),S=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).data={description:"",teachers:[],answers:[]},n.handleSubmit=function(t,e){t.preventDefault(),n.setState((function(t){return{tasks:[].concat(Object(u.a)(t.tasks),[Object(d.a)({},e)]),isSaved:!0}})),console.log(e)},n.state={tasks:[],isSaved:!1},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("tasks");t?this.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{tasks:Object(u.a)(JSON.parse(t))})})):localStorage.setItem("tasks",JSON.stringify([]))}},{key:"componentDidUpdate",value:function(t,e){this.state.tasks!==e.tasks&&localStorage.setItem("tasks",JSON.stringify(this.state.tasks)),this.state.isSaved&&this.setState((function(t){return Object(d.a)(Object(d.a)({},t),{},{isSaved:!1})}))}},{key:"render",value:function(){return s.a.createElement(E,{editMode:!1,handleSubmit:this.handleSubmit,teachers:["\u0418\u0432\u0430\u043d\u043e\u0432 \u0418.\u0418.","\u0416\u0443\u043a\u043e\u0432 \u0414.\u041a.","\u041f\u0435\u0442\u0440\u043e\u0432 \u0418.\u0418.","\u0421\u0438\u0434\u043e\u0440\u043e\u0432 \u0410.\u0410."],data:this.data,isSaved:this.state.isSaved})}}]),a}(n.Component),g=a(20),_=a.n(g),y=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).switchEditState=function(t){n.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{isEditActive:!e.isEditActive,editedTask:Object(d.a)({},e.tasks[t]),editedTaskIndex:t})}))},n.handleSubmit=function(t,e){if(t.preventDefault(),null===n.state.editedTaskIndex)throw new Error("Error with index of edited task");var a=1===n.state.tasks.length?[]:n.state.tasks.slice(0,n.state.editedTaskIndex),s=n.state.tasks.length<=n.state.editedTaskIndex+1?[]:n.state.tasks.slice(n.state.editedTaskIndex+1,n.state.tasks.length);console.log(a,s),n.setState((function(){return{tasks:[].concat(Object(u.a)(a),[Object(d.a)({},e)],Object(u.a)(s)),isSaved:!0}})),console.log(e)},n.state={tasks:[],isEditActive:!1,editedTask:{description:"",answers:[],teachers:[]},editedTaskIndex:null,isSaved:!1},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("tasks");null!=t&&this.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{tasks:JSON.parse(t)})}))}},{key:"componentDidUpdate",value:function(t,e){this.state.tasks!==e.tasks&&localStorage.setItem("tasks",JSON.stringify(this.state.tasks))}},{key:"render",value:function(){var t=this;return 0===this.state.tasks.length?s.a.createElement("div",null,s.a.createElement("h2",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447 \u043f\u0443\u0441\u0442!")):this.state.isEditActive?s.a.createElement("div",null,s.a.createElement(E,{editMode:!0,handleSubmit:this.handleSubmit,teachers:["\u0418\u0432\u0430\u043d\u043e\u0432 \u0418.\u0418.","\u0416\u0443\u043a\u043e\u0432 \u0414.\u041a.","\u041f\u0435\u0442\u0440\u043e\u0432 \u0418.\u0418.","\u0421\u0438\u0434\u043e\u0440\u043e\u0432 \u0410.\u0410."],data:this.state.editedTask})):s.a.createElement("div",{className:_.a.container},s.a.createElement("h2",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447:"),this.state.tasks.map((function(e,a){return s.a.createElement("div",{className:_.a.taskContainer,key:a+"".concat(e.description)},s.a.createElement("p",null," ",a+1,". ",e.description),s.a.createElement("button",{className:_.a.submitBtn,onClick:function(){return t.switchEditState(a)}},"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))})))}}]),a}(n.Component),I=function(){return s.a.createElement("div",{className:"container"},s.a.createElement(o.c,null,s.a.createElement(o.a,{path:"/",component:S,exact:!0}),s.a.createElement(o.a,{path:"/edit",component:y})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(r.a,null,s.a.createElement(I,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},8:function(t,e,a){t.exports={answers:"TaskForm_answers__3AJ8z",answersBtn:"TaskForm_answersBtn__3AXzh",deleteBtn:"TaskForm_deleteBtn__CzsfC",submitBtn:"TaskForm_submitBtn__26RWP",goBtn:"TaskForm_goBtn__1iIeg",doMainBtn:"TaskForm_doMainBtn__1vu64",undoMainBtn:"TaskForm_undoMainBtn__2ig8b"}}},[[29,1,2]]]);
//# sourceMappingURL=main.1e7e8dfb.chunk.js.map